import{XtallatX}from"./node_modules/xtal-latx/xtal-latx.js";var search="search",text_content="text-content",reSanitize=/(<([^>]+)>)/ig;export var XtalSplit=function(_XtallatX){babelHelpers.inherits(XtalSplit,_XtallatX);function XtalSplit(){babelHelpers.classCallCheck(this,XtalSplit);return babelHelpers.possibleConstructorReturn(this,(XtalSplit.__proto__||Object.getPrototypeOf(XtalSplit)).apply(this,arguments))}babelHelpers.createClass(XtalSplit,[{key:"attributeChangedCallback",value:function attributeChangedCallback(name,oldVal,newVal){switch(name){case search:this._search=newVal;break;case text_content:this._textContent=newVal?this.strip(newVal):"";break;}this.onPropsChange()}},{key:"strip",value:function strip(html){return html.replace(reSanitize,"")}},{key:"connectedCallback",value:function connectedCallback(){this._connected=!0;this._upgradeProperties(["search","textContent"]);this.onPropsChange()}},{key:"onPropsChange",value:function onPropsChange(){var _this=this;if(!this._connected)return;if(!this._textContent)this._textContent=this.innerText;if(!this._search){this.innerText=this._textContent}else{var split=this._textContent.split(new RegExp(this._search,"i")),textContentLength=this._textContent.length,tokenCount=split.length,len=this._search.length,iPos=0,text="";split.forEach(function(token,idx){iPos+=token.length;text+=token;if(idx<tokenCount&&iPos<textContentLength)text+="<span class='match'>"+_this._textContent.substr(iPos,len)+"</span>";iPos+=len});this.innerHTML=text}}},{key:"search",get:function get(){return this._search},set:function set(val){this.attr(search,val)}},{key:"textContent",get:function get(){return this._textContent},set:function set(val){this.attr(text_content,val)}}],[{key:"is",get:function get(){return"xtal-split"}},{key:"observedAttributes",get:function get(){return babelHelpers.get(XtalSplit.__proto__||Object.getPrototypeOf(XtalSplit),"observedAttributes",this).concat([search,text_content])}}]);return XtalSplit}(XtallatX(HTMLElement));if(!customElements.get(XtalSplit.is))customElements.define(XtalSplit.is,XtalSplit);