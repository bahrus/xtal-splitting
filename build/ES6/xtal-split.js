import{XtallatX}from"./node_modules/xtal-latx/xtal-latx.js";const search="search",text_content="text-content";export class XtalSplit extends XtallatX(HTMLElement){static get is(){return"xtal-split"}static get observedAttributes(){return super.observedAttributes.concat([search,text_content])}attributeChangedCallback(name,oldVal,newVal){switch(name){case search:this._search=newVal;break;case text_content:this._textContent=newVal?this.strip(newVal):"";break;}this.onPropsChange()}get search(){return this._search}set search(val){this.attr(search,val)}get textContent(){return this._textContent}set textContent(val){this.attr(text_content,val)}strip(html){var tmp=document.createElement("DIV");tmp.innerHTML=html;return tmp.textContent||tmp.innerText||""}connectedCallback(){this._connected=!0;this._upgradeProperties(["search","textContent"]);this.onPropsChange()}onPropsChange(){if(!this._connected||!this._textContent)return;if(!this._search){this.innerText=this._textContent}else{const split=this._textContent.split(new RegExp(this._search,"i")),tokenCount=split.length,len=this._search.length;let iPos=0,text="";split.forEach((token,idx)=>{iPos+=token.length;text+=token;if(idx<tokenCount)text+="<span class='match'>"+this._textContent.substr(iPos,len)+"</span>";iPos+=len});this.innerHTML=text}}}if(!customElements.get(XtalSplit.is))customElements.define(XtalSplit.is,XtalSplit);